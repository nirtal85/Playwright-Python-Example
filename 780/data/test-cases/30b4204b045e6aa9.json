{"uid":"30b4204b045e6aa9","name":"Test Accessibility with Default Counts","fullName":"tests.accesability_test.TestAccessibility#test_accessibility_default_counts","historyId":"8bd050b234c4da01a98b9ff6fff49630","time":{"start":1756777066428,"stop":1756777066694,"duration":266},"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f0f2fc62990>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f0f2fb8a3c0>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f0f2fb8a3c0>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"axe_playwright","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1756777065318,"stop":1756777065318,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1756777065319,"stop":1756777065629,"duration":310},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1756777065629,"stop":1756777065629,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1756777065629,"stop":1756777065629,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1756777065630,"stop":1756777065949,"duration":319},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1756777065630,"stop":1756777065630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1756777065630,"stop":1756777065630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1756777065949,"stop":1756777065950,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1756777065950,"stop":1756777065950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1756777065950,"stop":1756777065950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1756777065950,"stop":1756777065950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1756777065950,"stop":1756777065950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1756777065951,"stop":1756777065975,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1756777065951,"stop":1756777065951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1756777065951,"stop":1756777065951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1756777065975,"stop":1756777066068,"duration":93},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"goto","time":{"start":1756777066068,"stop":1756777066427,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_playwright_results","time":{"start":1756777066068,"stop":1756777066068,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f0f2fc62990>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f0f2fb8a3c0>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f0f2fb8a3c0>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","steps":[],"attachments":[{"uid":"804071346cea49f8","name":"Accessibility Violation Results","source":"804071346cea49f8.json","type":"application/json","size":6298}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"attach_playwright_results::0","time":{"start":1756777066698,"stop":1756777066840,"duration":142},"status":"passed","steps":[],"attachments":[{"uid":"f81ca77dae5d18fd","name":"URL","source":"f81ca77dae5d18fd.uri","type":"text/uri-list","size":26},{"uid":"b410ac67660ff815","name":"Screen shot on failure","source":"b410ac67660ff815.png","type":"image/png","size":29471},{"uid":"bbc35759f9a45204","name":"public ip address","source":"bbc35759f9a45204.txt","type":"text/plain","size":14}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1756777066841,"stop":1756777066942,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1756777066942,"stop":1756777066951,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1756777068274,"stop":1756777068335,"duration":61},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1756777068274,"stop":1756777068274,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1756777068337,"stop":1756777068345,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"accesability_test"},{"name":"subSuite","value":"TestAccessibility"},{"name":"host","value":"3adf4102f478"},{"name":"thread","value":"231-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.accesability_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"30b4204b045e6aa9.json","parameterValues":["'chromium'"]}