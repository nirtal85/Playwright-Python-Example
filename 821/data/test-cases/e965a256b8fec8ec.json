{"uid":"e965a256b8fec8ec","name":"Test Accessibility with Default Counts","fullName":"tests.accesability_test.TestAccessibility#test_accessibility_default_counts","historyId":"8bd050b234c4da01a98b9ff6fff49630","time":{"start":1760319631319,"stop":1760319631606,"duration":287},"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f71a673ac10>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f71a6652510>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f71a6652510>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1760319630157,"stop":1760319630157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"axe_playwright","time":{"start":1760319630157,"stop":1760319630157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1760319630157,"stop":1760319630157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760319630157,"stop":1760319630157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1760319630157,"stop":1760319630157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1760319630158,"stop":1760319630158,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1760319630158,"stop":1760319630462,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1760319630462,"stop":1760319630463,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1760319630463,"stop":1760319630463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1760319630463,"stop":1760319630814,"duration":351},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1760319630463,"stop":1760319630463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1760319630463,"stop":1760319630463,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1760319630814,"stop":1760319630815,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1760319630814,"stop":1760319630814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1760319630815,"stop":1760319630815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1760319630815,"stop":1760319630815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760319630815,"stop":1760319630815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1760319630815,"stop":1760319630815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760319630815,"stop":1760319630815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1760319630815,"stop":1760319630841,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1760319630841,"stop":1760319630927,"duration":86},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_playwright_results","time":{"start":1760319630927,"stop":1760319630927,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"goto","time":{"start":1760319630927,"stop":1760319631318,"duration":391},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f71a673ac10>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f71a6652510>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f71a6652510>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","steps":[],"attachments":[{"uid":"bbde22a579c50ac9","name":"Accessibility Violation Results","source":"bbde22a579c50ac9.json","type":"application/json","size":6298}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"attach_playwright_results::0","time":{"start":1760319631610,"stop":1760319631721,"duration":111},"status":"passed","steps":[],"attachments":[{"uid":"a014fa234d0f55fc","name":"URL","source":"a014fa234d0f55fc.uri","type":"text/uri-list","size":26},{"uid":"c5e1102d2421cc19","name":"Screen shot on failure","source":"c5e1102d2421cc19.png","type":"image/png","size":29473},{"uid":"a8497538a0d5b701","name":"public ip address","source":"a8497538a0d5b701.txt","type":"text/plain","size":14}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1760319631722,"stop":1760319631816,"duration":94},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1760319631817,"stop":1760319631829,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1760319633063,"stop":1760319633063,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1760319633064,"stop":1760319633118,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1760319633120,"stop":1760319633129,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"accesability_test"},{"name":"subSuite","value":"TestAccessibility"},{"name":"host","value":"3ff9bae5db6c"},{"name":"thread","value":"235-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.accesability_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"e965a256b8fec8ec.json","parameterValues":["'chromium'"]}