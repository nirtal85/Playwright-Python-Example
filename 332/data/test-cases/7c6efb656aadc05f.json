{"uid":"7c6efb656aadc05f","name":"Test Accessibility with Default Counts","fullName":"tests.accesability_test.TestAccessibility#test_accessibility_default_counts","historyId":"8bd050b234c4da01a98b9ff6fff49630","time":{"start":1720659244561,"stop":1720659244792,"duration":231},"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f56dd788ad0>\naxe_playwright = <utilities.axe_helper.AxeHelper object at 0x7f56dd541b20>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page):\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:8: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utilities.axe_helper.AxeHelper object at 0x7f56dd541b20>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: Dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter(\n                [violation[\"impact\"] for violation in results.response[\"violations\"]]\n            )\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count\n            > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nutilities/axe_helper.py:51: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1720659226612,"stop":1720659226612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"_verify_url","time":{"start":1720659226612,"stop":1720659226612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"base_url","time":{"start":1720659226612,"stop":1720659226612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"delete_output_dir","time":{"start":1720659226613,"stop":1720659226613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"playwright","time":{"start":1720659226613,"stop":1720659226831,"duration":218},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser_type_launch_args","time":{"start":1720659226613,"stop":1720659226613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"axe_playwright","time":{"start":1720659226613,"stop":1720659226613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser_type_launch_args","time":{"start":1720659226831,"stop":1720659226840,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser_type","time":{"start":1720659226840,"stop":1720659226840,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"launch_browser","time":{"start":1720659226840,"stop":1720659226840,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser","time":{"start":1720659226841,"stop":1720659238248,"duration":11407},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"_pw_artifacts_folder","time":{"start":1720659238248,"stop":1720659238248,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"context","time":{"start":1720659238249,"stop":1720659238689,"duration":440},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser_context_args","time":{"start":1720659238249,"stop":1720659238249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"new_context","time":{"start":1720659238249,"stop":1720659238249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser_context_args","time":{"start":1720659238249,"stop":1720659238249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"device","time":{"start":1720659238249,"stop":1720659238249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"_artifacts_recorder","time":{"start":1720659238249,"stop":1720659238249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"page","time":{"start":1720659238689,"stop":1720659242658,"duration":3969},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"attach_playwright_results","time":{"start":1720659242658,"stop":1720659242658,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"goto","time":{"start":1720659242658,"stop":1720659244560,"duration":1902},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f56dd788ad0>\naxe_playwright = <utilities.axe_helper.AxeHelper object at 0x7f56dd541b20>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page):\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:8: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utilities.axe_helper.AxeHelper object at 0x7f56dd541b20>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: Dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter(\n                [violation[\"impact\"] for violation in results.response[\"violations\"]]\n            )\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count\n            > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nutilities/axe_helper.py:51: AssertionError","steps":[],"attachments":[{"uid":"c6b3f61c52c0292d","name":"Accessibility Violation Results","source":"c6b3f61c52c0292d.json","type":"application/json","size":6297}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true},"afterStages":[{"name":"attach_playwright_results::0","time":{"start":1720659244796,"stop":1720659245143,"duration":347},"status":"passed","steps":[],"attachments":[{"uid":"e4722c99f204ac4d","name":"URL","source":"e4722c99f204ac4d.uri","type":"text/uri-list","size":26},{"uid":"9c2d11b173a4d942","name":"Screen shot on failure","source":"9c2d11b173a4d942.png","type":"image/png","size":31783},{"uid":"45bf16cd02b5dd9c","name":"public ip address","source":"45bf16cd02b5dd9c.txt","type":"text/plain","size":13}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"new_context::0","time":{"start":1720659245144,"stop":1720659245302,"duration":158},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"_artifacts_recorder::0","time":{"start":1720659245302,"stop":1720659245309,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"browser::0","time":{"start":1720659248423,"stop":1720659248643,"duration":220},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"_pw_artifacts_folder::0","time":{"start":1720659248423,"stop":1720659248423,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"playwright::0","time":{"start":1720659248644,"stop":1720659248651,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false},{"name":"axe_playwright::0","time":{"start":1720659248652,"stop":1720659248652,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"accesability_test"},{"name":"subSuite","value":"TestAccessibility"},{"name":"host","value":"fv-az1980-950"},{"name":"thread","value":"7023-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.accesability_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"7c6efb656aadc05f.json","parameterValues":["'chromium'"]}