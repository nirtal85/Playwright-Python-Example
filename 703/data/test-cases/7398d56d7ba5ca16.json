{"uid":"7398d56d7ba5ca16","name":"Test Accessibility with Default Counts","fullName":"tests.accesability_test.TestAccessibility#test_accessibility_default_counts","historyId":"8bd050b234c4da01a98b9ff6fff49630","time":{"start":1750124697056,"stop":1750124697226,"duration":170},"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f7d3fa3f890>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f7d3fb234d0>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f7d3fb234d0>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1750124696003,"stop":1750124696003,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1750124696003,"stop":1750124696003,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1750124696004,"stop":1750124696004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"axe_playwright","time":{"start":1750124696004,"stop":1750124696004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1750124696004,"stop":1750124696004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1750124696004,"stop":1750124696004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1750124696004,"stop":1750124696302,"duration":298},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1750124696302,"stop":1750124696311,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1750124696311,"stop":1750124696311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1750124696311,"stop":1750124696311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1750124696311,"stop":1750124696582,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1750124696311,"stop":1750124696311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1750124696583,"stop":1750124696583,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1750124696583,"stop":1750124696583,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1750124696583,"stop":1750124696583,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1750124696584,"stop":1750124696584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1750124696584,"stop":1750124696584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1750124696584,"stop":1750124696584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1750124696584,"stop":1750124696626,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1750124696584,"stop":1750124696584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1750124696626,"stop":1750124696710,"duration":84},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"goto","time":{"start":1750124696710,"stop":1750124697055,"duration":345},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_playwright_results","time":{"start":1750124696710,"stop":1750124696710,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}","statusTrace":"self = <tests.accesability_test.TestAccessibility object at 0x7f7d3fa3f890>\naxe_playwright = <src.utilities.axe_helper.AxeHelper object at 0x7f7d3fb234d0>\npage = <Page url='https://www.saucedemo.com/'>\n\n    @allure.title(\"Test Accessibility with Default Counts\")\n    def test_accessibility_default_counts(self, axe_playwright, page) -> None:\n>       axe_playwright.check_accessibility(page)\n\ntests/accesability_test.py:7: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <src.utilities.axe_helper.AxeHelper object at 0x7f7d3fb234d0>\npage = <Page url='https://www.saucedemo.com/'>\nmaximum_allowed_violations_by_impact = {'critical': 0, 'minor': 0, 'moderate': 0, 'serious': 0}\n\n    def check_accessibility(\n        self, page: Page, maximum_allowed_violations_by_impact: dict[str, int] = None\n    ) -> None:\n        \"\"\"Checks accessibility of the page using playwright axe.\n    \n        :param page: Playwright Page object\n        :param maximum_allowed_violations_by_impact: A dictionary\n            specifying the maximum allowed violations for each impact\n            level (e.g., {'minor': 2, 'moderate': 1, 'serious': 0,\n            'critical': 0}). If None, no violations will be allowed for\n            any impact level.\n        \"\"\"\n        if maximum_allowed_violations_by_impact is None:\n            maximum_allowed_violations_by_impact = {\n                \"minor\": 0,\n                \"moderate\": 0,\n                \"serious\": 0,\n                \"critical\": 0,\n            }\n        results = self.axe.run(page)\n        violations_count = dict(\n            Counter([violation[\"impact\"] for violation in results.response[\"violations\"]])\n        )\n        if violations_exceeded := {\n            impact_level: violation_count\n            for impact_level, violation_count in violations_count.items()\n            if violation_count > maximum_allowed_violations_by_impact.get(impact_level, 0)\n        }:\n            allure.attach(\n                body=json.dumps(results.response[\"violations\"], indent=4),\n                name=\"Accessibility Violation Results\",\n                attachment_type=allure.attachment_type.JSON,\n            )\n>           assert not violations_exceeded, (\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Found accessibility violations exceeding the maximum allowed: \"\n                f\"{violations_exceeded}\"\n            )\nE           AssertionError: Found accessibility violations exceeding the maximum allowed: {'moderate': 3}\n\nsrc/utilities/axe_helper.py:46: AssertionError","steps":[],"attachments":[{"uid":"3885c091c9975af7","name":"Accessibility Violation Results","source":"3885c091c9975af7.json","type":"application/json","size":6297}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"attach_playwright_results::0","time":{"start":1750124697231,"stop":1750124697589,"duration":358},"status":"passed","steps":[],"attachments":[{"uid":"a7858028aac8907e","name":"URL","source":"a7858028aac8907e.uri","type":"text/uri-list","size":26},{"uid":"9b79855a501ebb9","name":"Screen shot on failure","source":"9b79855a501ebb9.png","type":"image/png","size":29807},{"uid":"5e04045b677d9c91","name":"public ip address","source":"5e04045b677d9c91.txt","type":"text/plain","size":12}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1750124697590,"stop":1750124697706,"duration":116},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1750124697706,"stop":1750124697718,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1750124699138,"stop":1750124699138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1750124699139,"stop":1750124699200,"duration":61},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1750124699202,"stop":1750124699211,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"accesability_test"},{"name":"subSuite","value":"TestAccessibility"},{"name":"host","value":"2ad10bd9b447"},{"name":"thread","value":"232-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.accesability_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"7398d56d7ba5ca16.json","parameterValues":["'chromium'"]}